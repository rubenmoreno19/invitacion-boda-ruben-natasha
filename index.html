<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rubén & Natasha — Invitación de Boda</title>
  <!--
    Proyecto: Invitación de boda (nivel TOP)
    Estructura: este archivo es una versión "todo en uno" para que la pruebes rápido.
    - index.html -> contiene HTML, CSS y JS (multidioma, formulario RSVP, animaciones)
    - assets/ -> carpeta para imágenes (mapa, brújula, sellos, foto vuestra)

    Instrucciones rápidas (resumen):
    1) Sustituye las imágenes en /assets/ por las tuyas (foto.jpg, mapa.png, sello.png, compass.png)
    2) Configura el "ENDPOINT_RSVP" en la sección de <script> para apuntar a tu Google Apps Script (ver abajo)
    3) Sube al repo de GitHub y activa GitHub Pages en la rama main (o gh-pages)

    Configuración para almacenar respuestas en una hoja de cálculo y enviar e-mails (Google Apps Script):
    -----------------------------------------------------------------------------
    1. Crea una hoja de cálculo en Google Sheets. Ponle nombre "RSVP - Nuestra Boda".
    2. Ve a Extensiones → Apps Script y pega este código nuevo en el editor (archivo Code.gs):

    // --- START Apps Script code ---
    function doPost(e) {
      // Asegúrate de desplegar como Web App: Ejecutar la app como: "Yo"; Quién tiene acceso: "Cualquiera, incluso anónimo"
      var ss = SpreadsheetApp.openById('TU_SHEET_ID_AQUI'); // sustituye por el ID de tu sheet
      var sheet = ss.getSheetByName('Respuestas') || ss.insertSheet('Respuestas');
      var data = JSON.parse(e.postData.contents);

      var fecha = new Date();
      var fila = [
        fecha,
        data.lang || '',
        data.nombre || '',
        data.numPersonas || '',
        data.alergias || '',
        data.mensaje || '',
        data.contacto || ''
      ];
      sheet.appendRow(fila);

      // Enviar correo de notificación (opcional)
      var emailTo = 'TU_EMAIL_AQUI';
      var subject = 'Nueva RSVP: ' + (data.nombre || 'Sin nombre');
      var body = 'Nueva respuesta recibida:

' +
                 'Nombre: ' + data.nombre + '
' +
                 'Número de personas: ' + data.numPersonas + '
' +
                 'Alergias: ' + data.alergias + '
' +
                 'Contacto: ' + data.contacto + '
' +
                 'Mensaje: ' + data.mensaje + '
' +
                 'Idioma: ' + data.lang + '
' +
                 'Fecha: ' + fecha;
      MailApp.sendEmail(emailTo, subject, body);

      return ContentService.createTextOutput(JSON.stringify({status: 'ok'}))
        .setMimeType(ContentService.MimeType.JSON);
    }
    // --- END Apps Script code ---

    3. Guarda. En el menú: Deploy -> New deployment -> Tipo: Web app.
       - Ejecutar como: "Me" (tu cuenta)
       - Quién tiene acceso: "Cualquiera" (o "Anyone" si está en inglés). Si no quieres anónimo, puedes usar permisos con Google sign-in: eso complica un poco.
    4. Copia la URL del despliegue. Será algo como: "https://script.google.com/macros/s/XXXXX/exec"
    5. Pega esa URL en la constante ENDPOINT_RSVP dentro del archivo index.html (busca ENDPOINT_RSVP).

    Seguridad / privacidad:
    - Si no quieres que cualquiera poste datos, cambia los permisos y usa OAuth (más complejo).
    - Las respuestas se guardarán en la Sheet y podrás exportarlas a Excel (.xlsx) desde Google Sheets.

    Si prefieres usar un servicio sin código (Formspree / Getform / Netlify forms), dímelo y adapto el formulario.
  -->

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    /* Reset minimal */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family:Inter,Arial,Helvetica,sans-serif;background:#f2f2f2;color:#3b322d;display:flex;align-items:center;justify-content:center;padding:30px}

    /* Card */
    .card{width:100%;max-width:960px;background:#fff;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.08);overflow:hidden;border:6px solid #f6e8df}

    /* Header (pasaporte look) */
    .header{display:flex;gap:20px;padding:28px 32px;background:linear-gradient(180deg,#fff 60%,#fbf1ea 100%)}
    .brand{flex:1}
    .brand h1{font-family:'Playfair Display',serif;font-size:34px;color:#8b5e50;letter-spacing:1px}
    .subtitle{color:#b07b66;margin-top:6px;font-size:14px}

    .photo{width:160px;height:160px;border-radius:10px;overflow:hidden;border:4px solid #fff;box-shadow:0 6px 18px rgba(139,94,80,0.12)}
    .photo img{width:100%;height:100%;object-fit:cover}

    .content{display:grid;grid-template-columns:1fr 360px;gap:28px;padding:30px}

    /* Left: invitation details */
    .left{padding:12px}
    .passport{background:#fff;border-radius:10px;padding:18px;border:1px dashed #e9d7cd}
    .map-deco{width:100%;height:180px;background-image:url('assets/map.png');background-size:cover;background-position:center;border-radius:8px;opacity:0.9}
    .info-list{display:flex;flex-direction:column;gap:8px;margin-top:12px}
    .info-item{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-radius:8px}
    .info-item b{font-family:'Playfair Display',serif}

    /* Right: RSVP card */
    .right{padding:12px}
    .rsvp{background:linear-gradient(180deg,#fff,#fff);padding:18px;border-radius:10px;border:1px solid #efe1d6}
    .rsvp h3{font-family:'Playfair Display',serif;margin-bottom:8px;color:#8b5e50}
    label{display:block;font-size:13px;margin:8px 0 4px}
    input[type=text],input[type=tel],input[type=email],textarea,select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6d7ce;font-size:14px}
    .row{display:flex;gap:8px}
    .small{flex:1}
    .btn{display:inline-block;margin-top:12px;padding:10px 16px;border-radius:999px;background:#8b5e50;color:#fff;border:none;cursor:pointer;font-weight:600}
    .muted{font-size:12px;color:#7a6b64;margin-top:8px}

    /* Footer */
    .footer{padding:18px;border-top:1px solid #f0e5de;background:#fbf5f2;text-align:center;font-size:13px;color:#7a6b64}

    /* Language selector */
    .lang-select{position:absolute;right:36px;top:18px}

    /* Responsive */
    @media(max-width:880px){
      .content{grid-template-columns:1fr;}
      .photo{width:120px;height:120px}
    }

    /* Small animations */
    .airplane{position:relative;display:inline-block;transform:translateY(0);animation:float 4s ease-in-out infinite}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)}}

    .success{background:#e8f8ef;border-left:4px solid #66bb6a;padding:10px;margin-top:10px;border-radius:6px;color:#1b5e20}
  </style>
</head>
<body>

  <div class="card">
    <div class="header">
      <div class="brand">
        <div style="position:relative">
          <div class="lang-select">
            <select id="lang" onchange="switchLang(this.value)">
              <option value="es">Español</option>
              <option value="en">English</option>
              <option value="ru">Русский</option>
            </select>
          </div>
          <h1 id="names">Rubén & Natasha</h1>
          <div class="subtitle" id="tagline">Pasaporte a nuestra boda — 22.07.2026</div>
        </div>
      </div>
      <div class="photo">
        <img src="assets/photo.jpg" alt="Rubén & Natasha" id="photo">
      </div>
    </div>

    <div class="content">
      <div class="left">
        <div class="passport">
          <div class="map-deco" aria-hidden="true"></div>
          <div class="info-list">
            <div class="info-item"><span id="label_novio"><b>El novio</b></span><span id="groom">Rubén Moreno Taracén</span></div>
            <div class="info-item"><span id="label_novia"><b>La novia</b></span><span id="bride">Natasha Pokornova</span></div>
            <div class="info-item"><span id="label_fecha"><b>Fecha y hora</b></span><span id="date">22/07/2026 — 16:00</span></div>
            <div class="info-item"><span id="label_lugar"><b>Lugar</b></span><span id="place">Royal Beach — San Petersburgo, Rusia</span></div>
          </div>
          <p class="muted" id="note">Por favor, confirma asistencia antes del 01/06/2026.</p>
        </div>

        <div style="margin-top:14px">
          <h3 style="font-family:'Playfair Display',serif;color:#8b5e50">Nuestra historia</h3>
          <p class="muted" id="story">Un poquito de texto romántico y una breve historia de cómo nos conocimos. (Cambia este texto desde el archivo HTML.)</p>
        </div>
      </div>

      <div class="right">
        <div class="rsvp">
          <h3 id="rsvp_title">Confirmar asistencia</h3>
          <form id="rsvpForm" onsubmit="submitForm(event)">
            <input type="hidden" id="lang_input" name="lang" value="es">
            <label for="name" id="lbl_name">Nombre completo</label>
            <input type="text" id="name" name="name" required placeholder="Ej: Rubén García">

            <div class="row">
              <div class="small">
                <label id="lbl_count">Número de personas</label>
                <select id="count" name="numPersonas">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </div>
              <div class="small">
                <label id="lbl_contact">Teléfono / e-mail</label>
                <input type="text" id="contact" name="contact" placeholder="e.g. +34 600 000 000 / correo@ej.com">
              </div>
            </div>

            <label id="lbl_allergies">Alergias / Necesidades</label>
            <input type="text" id="alergias" name="alergias" placeholder="Ej: Sin gluten">

            <label id="lbl_msg">Mensaje</label>
            <textarea id="message" name="message" rows="3" placeholder="Algún comentario... (opcional)"></textarea>

            <button class="btn" type="submit" id="btn_send">Enviar RSVP</button>
            <div id="responseBox" aria-live="polite"></div>
          </form>

          <p class="muted" style="margin-top:8px" id="privacy">Tus datos se usarán solo para la organización del evento.</p>
        </div>
      </div>
    </div>

    <div class="footer">
      <div style="display:flex;align-items:center;justify-content:center;gap:10px">
        <span class="airplane">✈️</span>
        <div id="footer_text">El amor no necesita visa — 22/07/2026</div>
      </div>
    </div>
  </div>


  <script>
    /* ----------------------
       CONFIG
       ---------------------- */
    // Sustituye esto por la URL de tu Google Apps Script desplegado como Web App
    const ENDPOINT_RSVP = 'https://tu_script_google/aqui/exec'; // <- CAMBIAR

    /* Texto multidioma */
    const TEXTS = {
      es: {
        names: 'Rubén & Natasha',
        tagline: 'Pasaporte a nuestra boda — 22.07.2026',
        rsvp_title: 'Confirmar asistencia',
        lbl_name: 'Nombre completo',
        lbl_count: 'Número de personas',
        lbl_contact: 'Teléfono / e-mail',
        lbl_allergies: 'Alergias / Necesidades',
        lbl_msg: 'Mensaje',
        btn_send: 'Enviar RSVP',
        privacy: 'Tus datos se usarán solo para la organización del evento.',
        note: 'Por favor, confirma asistencia antes del 01/06/2026.'
      },
      en: {
        names: 'Rubén & Natasha',
        tagline: "Wedding passport — 22.07.2026",
        rsvp_title: 'RSVP — Please confirm',
        lbl_name: 'Full name',
        lbl_count: 'Number of guests',
        lbl_contact: 'Phone / e-mail',
        lbl_allergies: 'Allergies / Needs',
        lbl_msg: 'Message',
        btn_send: 'Send RSVP',
        privacy: 'Your data will only be used for event organization.',
        note: 'Please confirm attendance before 01/06/2026.'
      },
      ru: {
        names: 'Рубен & Наташа',
        tagline: 'Паспорт нашей свадьбы — 22.07.2026',
        rsvp_title: 'Подтвердите присутствие',
        lbl_name: 'Полное имя',
        lbl_count: 'Количество гостей',
        lbl_contact: 'Телефон / e-mail',
        lbl_allergies: 'Аллергии / Пожелания',
        lbl_msg: 'Сообщение',
        btn_send: 'Отправить',
        privacy: 'Ваши данные будут использованы только для организации мероприятия.',
        note: 'Пожалуйста, подтвердите до 01/06/2026.'
      }
    };

    /* Inicializa idioma */
    function switchLang(lang){
      document.getElementById('lang_input').value = lang;
      document.getElementById('names').textContent = TEXTS[lang].names;
      document.getElementById('tagline').textContent = TEXTS[lang].tagline;
      document.getElementById('rsvp_title').textContent = TEXTS[lang].rsvp_title;
      document.getElementById('lbl_name').textContent = TEXTS[lang].lbl_name;
      document.getElementById('lbl_count').textContent = TEXTS[lang].lbl_count;
      document.getElementById('lbl_contact').textContent = TEXTS[lang].lbl_contact;
      document.getElementById('lbl_allergies').textContent = TEXTS[lang].lbl_allergies;
      document.getElementById('lbl_msg').textContent = TEXTS[lang].lbl_msg;
      document.getElementById('btn_send').textContent = TEXTS[lang].btn_send;
      document.getElementById('privacy').textContent = TEXTS[lang].privacy;
      document.getElementById('note').textContent = TEXTS[lang].note;
    }

    // set default to Spanish
    switchLang('es');

    /* Envío del formulario */
    async function submitForm(e){
      e.preventDefault();
      const btn = document.getElementById('btn_send');
      btn.disabled = true; btn.textContent = 'Enviando...';

      const payload = {
        lang: document.getElementById('lang_input').value,
        nombre: document.getElementById('name').value.trim(),
        numPersonas: document.getElementById('count').value,
        alergias: document.getElementById('alergias').value.trim(),
        mensaje: document.getElementById('message').value.trim(),
        contacto: document.getElementById('contact').value.trim()
      };

      try{
        const res = await fetch(ENDPOINT_RSVP, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify(payload)
        });
        if(!res.ok) throw new Error('Network response was not ok');
        const data = await res.json();
        showSuccess();
        document.getElementById('rsvpForm').reset();
      }catch(err){
        showError(err);
      }finally{
        btn.disabled = false; btn.textContent = TEXTS[document.getElementById('lang_input').value].btn_send;
      }
    }

    function showSuccess(){
      const box = document.getElementById('responseBox');
      box.innerHTML = '<div class="success">Gracias — tu respuesta ha sido registrada. ❤️</div>';
    }

    function showError(err){
      const box = document.getElementById('responseBox');
      box.innerHTML = '<div class="success" style="background:#fdecea;border-left-color:#e53935;color:#8b1c1c">Ha ocurrido un error. Intenta de nuevo o escríbenos por WhatsApp.</div>';
      console.error(err);
    }

    /* Pequeña mejora: cambiar texto del botón según idioma del selector */
    document.getElementById('lang').addEventListener('change', (e)=>{
      switchLang(e.target.value);
    });

    /* TODO: añadir animaciones extra o personalizaciones en JS si quieres */
  </script>
</body>
</html>
